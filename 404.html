<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Get the repository name
    var repoName = "SocSite";
    
    // Get the current path excluding the repo name
    var fullPath = window.location.pathname;
    
    // Try to extract the path after the repository name
    var pathRegex = new RegExp('\\/' + repoName + '\\/(.*)');
    var matches = fullPath.match(pathRegex);
    var pathWithoutRepo = matches && matches[1] ? matches[1] : '';
    
    // Create the redirect URL with the path in the hash fragment
    // Note: Already using hash format for Vue Router in hash mode
    var redirectUrl = window.location.origin + '/' + repoName + '/#/' + pathWithoutRepo;
    
    // Log for debugging
    console.log("Original URL:", fullPath);
    console.log("Path without repo:", pathWithoutRepo);
    console.log("Redirecting to:", redirectUrl);
    
    // Redirect
    window.location.replace(redirectUrl);
  </script>
</head>
<body>
  <h1>Redirecting...</h1>
  <p>If you are not redirected automatically, please click <a id="redirect-link" href="#">here</a>.</p>
  <script>
    // Get the repository name
    var repoName = "SocSite";
    
    // Get the current path excluding the repo name
    var fullPath = window.location.pathname;
    
    // Try to extract the path after the repository name
    var pathRegex = new RegExp('\\/' + repoName + '\\/(.*)');
    var matches = fullPath.match(pathRegex);
    var pathWithoutRepo = matches && matches[1] ? matches[1] : '';
    
    // Update the fallback link
    document.getElementById('redirect-link').href = window.location.origin + '/' + repoName + '/#/' + pathWithoutRepo;
  </script>
</body>
</html>