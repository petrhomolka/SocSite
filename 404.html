<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // This script takes the current URL path and converts it to a form that
    // can be passed through the URL hash, then redirects to the root URL with
    // that hash value.

    // Parse the URL
    var pathSegments = window.location.pathname.split('/');
    var repoName = "SocSite"; // Repository name
    
    // Extract the path after the repository name
    var path = '';
    var repoIndex = pathSegments.indexOf(repoName);
    
    if (repoIndex !== -1 && pathSegments.length > repoIndex + 1) {
      // Join all segments after the repo name
      path = pathSegments.slice(repoIndex + 1).join('/');
    } else {
      // Fall back to using the whole path except leading slash
      path = window.location.pathname.replace(/^\//, '');
      if (path.startsWith(repoName + '/')) {
        path = path.substring(repoName.length + 1);
      }
    }
    
    // Redirect to the main page with the path in the hash
    var redirectUrl = window.location.origin + '/' + repoName + '/#/' + path;
    window.location.replace(redirectUrl);
  </script>
</head>
<body>
  <h1>Redirecting...</h1>
  <p>If you are not redirected automatically, please click <a id="redirect-link" href="#">here</a>.</p>
  <script>
    document.getElementById('redirect-link').href = window.location.origin + '/' + repoName + '/';
  </script>
</body>
</html>